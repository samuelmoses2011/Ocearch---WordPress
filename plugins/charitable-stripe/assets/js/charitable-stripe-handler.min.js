!function(e){var r=jQuery("body"),t=function(){CHARITABLE.Donation_Form.prototype.is_valid_card_number=function(){return Stripe.card.validateCardNumber(this.get_cc_number().replace(/ /g,""))};Stripe.setPublishableKey(CHARITABLE_STRIPE_VARS.key),r.on("charitable:form:validate",function(e,t){var i=t.get_cc_number(),a=t.get_cc_cvc(),c=t.get_cc_expiry_month(),n=t.get_cc_expiry_year();t.clear_cc_fields(),"stripe"===t.get_payment_method()&&(e.preventDefault(),Stripe.card.validateExpiry(c,n)||t.add_error(CHARITABLE_VARS.error_invalid_cc_expiry),0===t.errors.length&&(t.pause_processing=!0,Stripe.card.createToken({number:i,cvc:a,exp_month:c,exp_year:n},function(e,i){var a,c;c=t,(a=i).error?c.add_error(a.error.message):(c.get_input("stripe_token").val(a.id),r.trigger("charitable:form:process",c))})))})};r.on("charitable:form:initialize",function(e){var i,a,c;"checkout"===CHARITABLE_STRIPE_VARS.mode?(a=!1,c=StripeCheckout.configure({key:CHARITABLE_STRIPE_VARS.key,image:"",locale:"auto",token:function(e){a=!0,i.get_input("stripe_token").val(e.id),r.trigger("charitable:form:process",i)},closed:function(){!0!==a&&i.hide_processing()}}),r.on("charitable:form:validate",function(e,r){if("stripe"===(i=r).get_payment_method()&&0===i.errors.length){var t=CHARITABLE_STRIPE_VARS.zero_decimal?i.get_amount():100*i.get_amount();i.pause_processing=!0,c.open({name:CHARITABLE_STRIPE_VARS.site_name,description:i.get_description(),email:i.get_email(),currency:CHARITABLE_STRIPE_VARS.currency,amount:t})}})):t()})}();